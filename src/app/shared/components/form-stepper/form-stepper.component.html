<mat-horizontal-stepper linear #stepper>
  <mat-step *ngFor="let step of fields; let i = index; let last = last">
    <div @stepAnimation>
      <!-- Adicionando p-grid aqui para que os campos respeitem colunas -->
      <div class="p-fluid">
        <div class="p-grid">
          <formly-form
            [form]="form"
            [model]="model"
            [fields]="[step]"
          >
          </formly-form>
        </div>
      </div>
      
      <div class="d-flex flex-wrap gap-2 align-items-center justify-content-center mt-5">
        <button
          pButton
          icon="pi pi-chevron-left"
          label="Voltar"
          class="p-button-secondary"
          matStepperPrevious
          *ngIf="i !== 0"
          type="button"
        ></button>

        <button
          pButton
          icon="pi pi-chevron-right"
          label="AvanÃ§ar"
          class="p-button-primary"
          matStepperNext
          *ngIf="!last"
          [disabled]="!isValidGroup(step)"
          type="button"
        ></button>

        <button
          pButton
          icon="pi pi-save"
          label="Salvar"
          class="p-button-success"
          *ngIf="last"
          [disabled]="!form.valid"
          (click)="onSubmit()"
          type="button"
        ></button>
      </div>
    </div>
  </mat-step>
</mat-horizontal-stepper>
